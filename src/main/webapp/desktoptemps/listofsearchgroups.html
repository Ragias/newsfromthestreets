<div >
	<h2> Show all detectives ! </h2>
	<div id="map_canvas" style="width: 300px; height: 300px"></div>
	<h2>List of Groups you are Admin </h2>
	<div class="lift:ListOfSearchGroupYouAreAdmin"></div>

	<h2>List of Groups you are in </h2>
	<div class="lift:ListOfDetectiveInGroup"></div>

	<h2> List of active Groups</h2>
	<div class="lift:ShowActiveGroups"></div>

	<h2>List of Groups you are not in</h2>
	<div class="lift:ListOfSearchGroupDetectiveIsNotMember"></div>

	<script>
		var map;
		var markerArr = new Array();
		function initialize() {
			var greece = {'lat' : 38.01861070670554,
			'lng' : 23.625567382812505 }
			var watch;
			var mapOptions = {
				center : new google.maps.LatLng(greece.lat, greece.lng),
				zoom : 6,
				mapTypeId : google.maps.MapTypeId.ROADMAP
			};
			map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
			// Try HTML5 geolocation

			var checkJson = (function() {
				var searchGroupStr = $("#the_searchGroup option:selected").attr('value');

				$.getJSON("/api/newsfromthestreets/searchgroup/None", function(json) {

					if (json.length > 0) {
						for ( i = 0; i < json.length; i++) {
							var location = json[i].latlng;
							addMarker(location);
						}
					}
					if (json.length < markerArr.length) {
						if (!markerArr.isEmpty) {
							while (markerArr[0]) {
								markerArr.pop().setMap(null);
							}
						}
					}

				});

				setTimeout(arguments.callee, 1000);

			});
			checkJson();

			function addMarker(location) {

				var check = false;
				for ( i = 0; i < markerArr.length; i++) {
					console.log(markerArr[i].id + " " + location.id + " " + markerArr.length + " lat " + location.lat + " long " + location.long)
					if (markerArr[i].id == location.id) {
						check = true;

						if (location.lat == markerArr[i].position.lat() && location.long == markerArr[i].position.lng()) {
							break;
						}
						var point = new google.maps.LatLng(location.lat, location.long);

						var marker = new google.maps.Marker({
							position : point,
							map : map,
							id : location.id,
							title: location.username
						});
						markerArr[i].setMap(null)
						markerArr[i] = marker;
						break;
					}
				}
				if (!check) {
					//console.log(location.title)
					var point = new google.maps.LatLng(location.lat, location.long);

					var marker = new google.maps.Marker({
						position : point,
						map : map,
						title : location.username,
						id: location.id
					});
					markerArr.push(marker);
				}

			};
		};

		google.maps.event.addDomListener(window, 'load', initialize);
	</script>
</div>